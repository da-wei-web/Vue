<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <title>表单数据v-model双向绑定</title>
    <style>
        .title{
            height: 100px;
            margin-bottom: 20px;
            line-height: 100px;
            border-radius: 5px;
            text-indent: 4em;
        }
        .title > h1{
            color: rgb(9, 70, 240);
        }
        .formCon{
            height: 500px;
            border-radius: 7px;
        }
        .btnCon{
            margin-top: 24px;
        }
    </style>
</head>
<body>
    <!-- v-model用于表单控件自动获取用户输入信息 -->
    <section class="container">
        <section class="row title bg-info">
            <h1>v-model表单数据双向绑定</h1>
        </section>
        <section id="app" class="col-md-4 col-md-offset-4 formCon">
            <section class="form-group">
                <label for="email">邮箱：</label>
                <input type="email" class="form-control" id="emial" v-model="register.email">
            </section>
            <section class="form-group">
                <label for="password">密码：</label>
                <input type="password" class="form-control" id="password" v-model="register.password">
            </section>
            <section class="form-group">
                <section class="row form-inline">
                    <section class="col-md-4">
                        <label for="code">验证码：</label>
                        <input type="text" class="form-control" id="code" v-model="register.mail">
                    </section>
                    <section class="col-md-4 col-md-offset-3 btnCon">
                        <button class="btn btn-info" @click="sendMail()">{{ pageContent.text }}</button>
                    </section>
                </section>
            </section>
            <button class="btn btn-primary btn-lg" @click="handleClick">注册</button>
        </section>
    </section>
</body>
<script src="./js/vue.js"></script>
<script>
    // 实例化一个Vue对象
    const vm = new Vue({
        el: "#app",
        data: {
            pageContent: {
                text: "发送验证码",
                // 总时间
                count: "",
                // 定时器
                times: null,
            },
            register:{
                email: "",
                password: "",
                mail: ""
            }
        },
        methods: {
            // 发送验证码
            sendMail(){
                // console.log(this);
                let dateTime = 60;
                if(!this.pageContent.times){
                    // 总时间
                    this.pageContent.count = dateTime;
                    this.pageContent.text = this.pageContent.count + "(S)";
                    // 定时器
                    this.pageContent.times = setInterval(() => {
                        // console.log(this)
                        if(this.pageContent.count > 0 && this.pageContent.count <= dateTime){
                            this.pageContent.count--;
                            this.pageContent.text = this.pageContent.count + "(S)";
                        }else{
                            clearInterval(this.pageContent.times);
                            this.pageContent.times = null;
                            this.pageContent.text = "重新获取";
                        }
                    }, 1000);
                }
            },
            // 注册
            handleClick(){
                if(this.register.email == ""){
                    alert("邮箱不能为空");
                    return;
                }
                if( this.register.password == ""){
                    alert("密码不能为空");
                    return;
                }
                if( this.register.mail == ""){
                    alert("验证码不能为空");
                    return;
                }
            }
        }
    });

</script>
</html>